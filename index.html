<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente de Triagem Médica</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">
            <img src="img/logo.png" alt="Logo" class="logo"> Assistente de Triagem Médica
        </div>
    </nav>

    <div class="container">
        <h1 class="title">Bem-vindo/a/e à MAES</h1>

        <!-- Opções de Cadastro ou Login e Emergência -->
        <div id="opcoesContainer">
            <button onclick="mostrarCadastro()" class="btn btn-primary">Cadastrar</button>
            <button onclick="mostrarLogin()" class="btn btn-primary">Logar</button>
            <button onclick="seguirParaFilaEmergencia()" class="btn btn-danger">Emergência</button>
        </div>

        <!-- Formulário de Cadastro -->
        <div id="cadastroContainer" style="display: none;">
            <div class="card">
                <h2>Cadastro de Usuário</h2>
                <form id="formCadastro">
                    <input type="text" id="nomeCompleto" placeholder="Nome Completo" required><br>
                    <input type="date" id="dataNascimento" required>
                    <select id="sexo" required>
                        <option value="">Selecione o Sexo</option>
                        <option value="masculino">Masculino</option>
                        <option value="feminino">Feminino</option>
                        <option value="outro">Outro</option>
                    </select><br>
                    <input type="text" id="estadoCivil" placeholder="Estado Civil" required><br>
                    <input type="text" id="cpf" placeholder="CPF" required><br>
                    <input type="text" id="rgOuDocumento" placeholder="RG ou Documento" required><br>
                    <input type="text" id="cartaoSUS" placeholder="Cartão SUS"><br>
                    <input type="text" id="endereco" placeholder="Endereço Completo" required><br>
                    <input type="text" id="telefone" placeholder="Telefone Contato" required><br>
                    <input type="email" id="email" placeholder="Email" required><br>
                    <button type="submit" class="btn btn-success">Cadastrar</button>
                </form>
            </div>
        </div>

        <!-- Formulário de Login -->
        <div id="loginContainer" style="display: none;">
            <div class="card">
                <h2>Login</h2>
                <input type="text" id="cartaoSusLogin" placeholder="Número do Cartão SUS" required><br>
                <button onclick="fazerLogin()" class="btn btn-success">Logar</button>
            </div>
        </div>

        <!-- Seção de Entrada na Fila -->
        <div id="filaContainer" style="display: none;">
            <h2>Entrar na Fila de Atendimento</h2>
            <input type="text" id="nomeInput" placeholder="Como gostaria de ser chamado(a/e)" required>
            <button onclick="entrarNaFila()" class="btn fila-btn">Entrar na Fila</button>
            <p id="statusFila">Sua posição na fila: #3. Tempo estimado de espera: 10 minutos.</p>
        </div>

        <!-- Seção de Sintomas (escondida até a vez do usuário) -->
        <div id="sintomasContainer" style="display: none;">
            <h2>Descreva seus principais sintomas</h2>
            <textarea id="symptomsInput" placeholder="Digite seus sintomas aqui..." rows="4"></textarea>
            <button id="voiceBtn" onclick="startRecording()" class="btn-standard voice-btn">
                <img src="img/microfone.png" alt="Microfone"> Falar Sintomas
            </button>
            <button onclick="enviarSintomas()" class="btn-standard analyze-btn">Enviar Sintomas</button>
        </div>

        <!-- Tela de espera -->
        <div id="telaEsperaContainer" style="display: none;">
            <h2>Aguardando Atendimento</h2>
            <p id="mensagemFila">Por favor, aguarde. Você está na fila para o atendimento médico.</p>
        </div>
    </div>

    <!-- Script para carregar o footer dinamicamente -->
    <script>
        // Função para carregar o footer
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                // Insere o conteúdo do footer no final do body
                document.body.insertAdjacentHTML('beforeend', data);
            })
            .catch(error => console.error('Erro ao carregar o footer:', error));

        // Funções para mostrar as seções de cadastro, login e fila
        function mostrarCadastro() {
            document.getElementById('opcoesContainer').style.display = 'none';
            document.getElementById('cadastroContainer').style.display = 'block';
        }

        function mostrarLogin() {
            document.getElementById('opcoesContainer').style.display = 'none';
            document.getElementById('loginContainer').style.display = 'block';
        }

        function fazerLogin() {
            const cartaoSus = document.getElementById('cartaoSusLogin').value;
            if (cartaoSus) {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('filaContainer').style.display = 'block';
            } else {
                alert("Por favor, insira o número do Cartão SUS.");
            }
        }

        // Função para seguir diretamente para a fila de atendimento ao clicar em "Emergência"
        function seguirParaFilaEmergencia() {
            document.getElementById('opcoesContainer').style.display = 'none';
            document.getElementById('filaContainer').style.display = 'block';
            // Alterar o tempo de espera para 1 minuto (Emergência)
            document.getElementById('statusFila').textContent = "Sua posição na fila: #1. Tempo estimado de espera: 1 minuto.";
            // Atualiza a mensagem da fila para informar que é emergência
            document.getElementById('mensagemFila').textContent = "ATENÇÃO: Você está sendo atendido(a) com prioridade devido a um caso de emergência.";
        }

        function entrarNaFila() {
            const nome = document.getElementById('nomeInput').value;
            if (nome) {
                document.getElementById('filaContainer').style.display = 'none';
                document.getElementById('telaEsperaContainer').style.display = 'block';
            } else {
                alert("Por favor, insira seu nome.");
            }
        }
    </script>

    <script src="triagem.js"></script>
</body>
</html>
